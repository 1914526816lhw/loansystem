/**
 * ClassName：${NAME}
 * Description：
 * @author lihw
 * CreateTime: ${DATE} ${TIME}
 * @version 1.0.0
 */
 
 
 
 
     <resultMap id="BaseUserLoginMap" type="com.stu.entity.UserLogin">
        <id column="user_login_id" property="userLoginId" jdbcType="INTEGER"/>
        <result column="user_login_account" property="userLoginAccount" jdbcType="VARCHAR"/>
        <result column="user_login_password" property="userLoginPassword" jdbcType="VARCHAR"/>
        <result column="user_id" property="userId" jdbcType="INTEGER"/>
    </resultMap>
    <sql id="Base_Column_List">
    user_id, user_name, user_identity, user_security_question, user_security_answer, 
    user_phone, user_sex, user_middle_school, user_famous_race, account_character_id, 
    funding_center_id, user_permanent_address, user_mail_address, user_mail_box, user_qq,
    user_weChat, user_postal_address, user_family_address, user_postal_code, user_family_phone,
    user_contact_name, contact_work_unit, user_contact_number, user_contact_phone, user_contact_identity, 
    user_university, user_department, user_major, user_education, user_enrollment_year, 
    user_student_id, user_major_category, user_educational_system, user_graduation_time,
    user_work_unit, user_unit_property, user_unit_phone, user_unit_mail_address, user_unit_address, 
    change_reason_id, user_IDPhoto_front, user_IDPhoto_reverse, user_school_info_photo, 
    loan_id, guardian_id,user_loan_type
  </sql>
    <!--//////////////////////////////////// 查询操作 //////////////////////////////////////-->
    <select id="selectUserByIdentity" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        *
        from users
        where user_identity = #{userIdentity,jdbcType=VARCHAR}
    </select>
    <!--根据手机号码查询用户账号-->
    <select id="selectUserLoginByPhone" resultMap="BaseUserLoginMap" parameterType="java.lang.String">
        select * from userLogin
        where user_id = (select user_id from users where user_phone=#{userPhone,jdbcType=VARCHAR})
    </select>

    <!--/////////////////////////////////// 删除操作 /////////////////////////////////////-->
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from users
    where user_id = #{userId,jdbcType=INTEGER}
  </delete>

    <!--///////////////////////////////// 用户注册 ///////////////////////////////////////-->
    <insert id="registerUsers" parameterType="com.stu.entity.Users" useGeneratedKeys="true" keyProperty="userId">

    insert into users (user_name, user_identity,
      user_security_question, user_security_answer,
      user_phone)
    values (#{userName,jdbcType=VARCHAR}, #{userIdentity,jdbcType=VARCHAR},
      #{userSecurityQuestion,jdbcType=VARCHAR}, #{userSecurityAnswer,jdbcType=VARCHAR}, 
      #{userPhone,jdbcType=VARCHAR})
  </insert>


    <update id="updateByPrimaryKey" parameterType="com.stu.entity.Users">
    update users
    set user_name = #{userName,jdbcType=VARCHAR},
      user_identity = #{userIdentity,jdbcType=VARCHAR},
      user_security_question = #{userSecurityQuestion,jdbcType=VARCHAR},
      user_security_answer = #{userSecurityAnswer,jdbcType=VARCHAR},
      user_phone = #{userPhone,jdbcType=VARCHAR},
      user_sex = #{userSex,jdbcType=VARCHAR},
      user_middle_school = #{userMiddleSchool,jdbcType=VARCHAR},
      user_famous_race = #{userFamousRace,jdbcType=VARCHAR},
      account_character_id = #{accountCharacterId,jdbcType=INTEGER},
      funding_center_id = #{fundingCenterId,jdbcType=INTEGER},
      user_permanent_address = #{userPermanentAddress,jdbcType=VARCHAR},
      user_mail_address = #{userMailAddress,jdbcType=VARCHAR},
      user_mail_box = #{userMailBox,jdbcType=VARCHAR},
      user_qq = #{userQq,jdbcType=VARCHAR},
      user_weChat = #{userWechat,jdbcType=VARCHAR},
      user_postal_address = #{userPostalAddress,jdbcType=VARCHAR},
      user_family_address = #{userFamilyAddress,jdbcType=VARCHAR},
      user_postal_code = #{userPostalCode,jdbcType=VARCHAR},
      user_family_phone = #{userFamilyPhone,jdbcType=VARCHAR},
      user_contact_name = #{userContactName,jdbcType=VARCHAR},
      contact_work_unit = #{contactWorkUnit,jdbcType=VARCHAR},
      user_contact_number = #{userContactNumber,jdbcType=VARCHAR},
      user_contact_phone = #{userContactPhone,jdbcType=VARCHAR},
      user_contact_identity = #{userContactIdentity,jdbcType=VARCHAR},
      user_university = #{userUniversity,jdbcType=VARCHAR},
      user_department = #{userDepartment,jdbcType=VARCHAR},
      user_major = #{userMajor,jdbcType=VARCHAR},
      user_education = #{userEducation,jdbcType=VARCHAR},
      user_enrollment_year = #{userEnrollmentYear,jdbcType=VARCHAR},
      user_student_id = #{userStudentId,jdbcType=VARCHAR},
      user_major_category = #{userMajorCategory,jdbcType=VARCHAR},
      user_educational_system = #{userEducationalSystem,jdbcType=VARCHAR},
      user_graduation_time = #{userGraduationTime,jdbcType=VARCHAR},
      user_work_unit = #{userWorkUnit,jdbcType=VARCHAR},
      user_unit_property = #{userUnitProperty,jdbcType=VARCHAR},
      user_unit_phone = #{userUnitPhone,jdbcType=VARCHAR},
      user_unit_mail_address = #{userUnitMailAddress,jdbcType=VARCHAR},
      user_unit_address = #{userUnitAddress,jdbcType=VARCHAR},
      change_reason_id = #{changeReasonId,jdbcType=INTEGER},
      user_IDPhoto_front = #{userIdphotoFront,jdbcType=VARCHAR},
      user_IDPhoto_reverse = #{userIdphotoReverse,jdbcType=VARCHAR},
      user_school_info_photo = #{userSchoolInfoPhoto,jdbcType=VARCHAR},
      loan_id = #{loanId,jdbcType=INTEGER},
      guardian_id = #{guardianId,jdbcType=INTEGER},
      user_loan_type=#{userLoanType,jdbcType=VARCHAR}
    where user_id = #{userId,jdbcType=INTEGER}
  </update>
    <update id="updateSecurityQuestion" parameterType="com.stu.entity.Users">
        update users
        set user_security_question = #{userSecurityQuestion,jdbcType=VARCHAR},
        user_security_answer = #{userSecurityAnswer,jdbcType=VARCHAR}
        where user_identity = #{userIdentity,jdbcType=VARCHAR}
    </update>
    <update id="updateUserPhone" parameterType="com.stu.entity.Users">
        update users
        set user_phone = #{userPhone,jdbcType=VARCHAR},
        where user_identity = #{userIdentity,jdbcType=VARCHAR}
    </update>